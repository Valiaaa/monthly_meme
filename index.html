<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="style.css"> 
    <script src="meme.js"></script>
    <script src="canvasScript.js"></script>
    <title>My Monthly Meme Generator</title>
    <link rel="icon" href="circle_logo.png">
    <link href="graphik.woff" rel="stylesheet">
</head>

<body>
    <div id="bggrid"></div>
    <div class="operation">
        <div class="squares">
            <div id="blush" class="square"></div>
            <div id="morning" class="square"></div>
            <div id="blue" class="square"></div>
            <div id="linen" class="square"></div>
            <div id="purple" class="square"></div>
            <div id="picnic" class="square"></div>
        </div>
        <div class="canvas-container">
            <canvas id="canvas" width="1800" height="1800"></canvas>
        </div>
    </div>

    <div class="operation controls">
        <div class="gridHolder">
            <div class="item1">
                <button id="upload">Upload</button><br>
            </div>
            <div class="item2">
                <div class="slider-container">
                    <label for="widthSlider" style="font-weight: 200; font-size: 14px;">Picture Width</label><br>
                    <input id="widthSlider" type="range" min="720" max="1450">
                </div>
            </div>
            <div class="item3">
                <button id="download">Download</button>
            </div>  
            <div class="item4">
                <div class="text-container">
                    <textarea id="userText" placeholder="type your text here..." maxlength="140"></textarea>
                    <div id="charCount">Characters: 0</div> <!-- To display character count -->
                </div>                
            </div>
            
            
        </div>
    </div>
    <div id="message">
        &nbsp♥ here's a tool made by Valia for yall all ♥&nbsp
    </div>
</body>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const squares = document.querySelectorAll('.square');

    squares.forEach(square => {
        square.addEventListener('click', () => {
            // 移除所有 square 的 selected 类
            squares.forEach(s => {
                s.classList.remove('selected');
                s.style.boxShadow = '';
            });

            // 为点击的 square 添加 selected 类
            square.classList.add('selected');
        });
    });
});

document.addEventListener('DOMContentLoaded', () => {
    const squares = document.querySelectorAll('.square');
    let currentLogoUrl = 'logo.png'; // Default logo URL

    squares.forEach(square => {
        square.addEventListener('click', () => {
            // Remove logo from all square divs
            squares.forEach(s => {
                s.innerHTML = '';
            });

            // Determine logo URL based on square id
            const id = square.id;
            currentLogoUrl = (id === 'picnic' || id === 'purple') ? 'logo2.png' : 'logo.png';

            // Add logo image to the clicked square div
            const logo = document.createElement('img');
            logo.src = currentLogoUrl;
            logo.alt = 'logo';
            logo.style.width = '50%';
            logo.style.height = 'auto';
            logo.style.position = 'absolute';
            logo.style.top = '50%';
            logo.style.left = '50%';
            logo.style.transform = 'translate(-50%, -50%)';
            square.appendChild(logo);
        });
    });
});


document.addEventListener('DOMContentLoaded', function() {
    const slider = document.getElementById('widthSlider');

    function updateSliderBackground() {
        const value = (slider.value - slider.min) / (slider.max - slider.min) * 100;
        slider.style.setProperty('--value', `${value}%`);
        // Add your image recognition code here
        recognizeImage();
    }

    slider.addEventListener('input', updateSliderBackground);
    updateSliderBackground();
});

function recognizeImage() {
    // Add your image recognition logic here
    // This function will be called every time the slider value changes
    // You can update the canvas or perform any image processing tasks here
}
</script>

</html>